# B站视频带货助手 v2.0

一个功能强大的B站视频批量上传工具，专为带货场景设计，支持多账号管理、浏览器指纹伪装、内置浏览器环境、硬件许可证系统等企业级功能。

## ✨ 主要特性

### 🔐 企业级账号管理
- **多账号支持**：无限制添加和管理B站账号
- **简化存储**：账号数据以明文JSON格式存储，便于管理和调试
- **自动登录**：保存Cookie实现免密登录
- **状态监控**：实时监控账号登录状态和活跃度
- **专属端口**：为每个账号分配独立的浏览器调试端口，避免冲突

### 🌐 高级浏览器指纹伪装
- **独特指纹**：为每个账号生成唯一的浏览器指纹
- **多维度伪装**：User-Agent、屏幕分辨率、语言设置、WebGL指纹
- **智能优化**：自动验证和优化指纹安全性
- **安全评分**：指纹安全性评估系统（100分制）
- **防关联检测**：有效避免多账号关联风险

### 🚀 内置浏览器环境
- **ms-playwright集成**：内置完整的Chromium浏览器
- **免安装依赖**：无需额外安装Chrome或配置驱动
- **用户配置支持**：可选择使用系统Chrome配置和扩展
- **智能降级**：自动检测并使用最佳浏览器方案
- **超时优化**：针对网络环境优化的超时配置

### 📹 智能批量上传
- **并发上传**：支持多账号同时上传不同视频
- **模板配置**：灵活的标题、简介、标签模板系统
- **进度监控**：实时显示上传进度和状态
- **错误处理**：完善的重试机制和错误恢复
- **结果统计**：详细的上传结果统计和导出

### 🔒 硬件许可证系统
- **硬件绑定**：基于硬件指纹的设备授权
- **许可证生成器**：独立的许可证管理工具
- **到期管理**：灵活的授权期限控制
- **安全加密**：HMAC-SHA256签名验证
- **离线验证**：支持离线环境的许可证验证

### 🎨 现代化GUI界面
- **PyQt5框架**：响应式的现代化界面设计
- **分页管理**：清晰的功能模块分页
- **实时日志**：详细的操作日志和状态显示
- **主题支持**：清爽的界面配色和交互体验

## 📦 版本说明

### 🖥️ EXE版本（推荐）
**特点**：
- ✅ **完全免安装**：下载即用，无需Python环境
- ✅ **内置浏览器**：集成ms-playwright，无兼容性问题
- ✅ **包含许可证工具**：独立的许可证生成器
- ✅ **适合所有用户**：技术门槛最低

**包含文件**：
- `B站视频带货助手.exe` (202MB) - 主程序
- `B站许可证生成器.exe` (39MB) - 许可证管理工具
- 启动脚本和使用说明

### 💻 源码版本
**特点**：
- ✅ **完全开源**：可查看和修改所有代码
- ✅ **灵活配置**：可自定义功能和参数
- ✅ **开发友好**：支持二次开发和集成
- ❌ **需要环境**：需要Python 3.7+和依赖包

## 🚀 快速开始

### EXE版本使用
1. **下载**：获取 `B站视频带货助手_完整EXE版` 文件夹
2. **启动**：双击 `启动程序.bat` 或直接运行 `B站视频带货助手.exe`
3. **配置**：在界面中添加B站账号和配置上传参数
4. **上传**：将视频放入 `videos` 文件夹，开始批量上传

### 源码版本安装

#### 系统要求
- Python 3.7+ (推荐3.11+)
- Windows/Linux/macOS
- 至少4GB可用内存

#### 环境设置（重要！）
```bash
# 1. 克隆项目
git clone <项目地址>
cd bilibili-uploader

# 2. 创建虚拟环境（必须！）
python -m venv .venv

# 3. 激活虚拟环境
# Windows PowerShell:
.\.venv\Scripts\Activate.ps1
# Windows CMD:
.venv\Scripts\activate.bat
# Linux/Mac:
source .venv/bin/activate

# 4. 升级pip
python -m pip install --upgrade pip

# 5. 安装依赖
pip install -r requirements.txt
```

#### 运行程序
```bash
# 方法1：使用启动脚本（推荐）
.\start.bat

# 方法2：手动启动
# 确保虚拟环境已激活
.\.venv\Scripts\Activate.ps1
# 设置Qt环境变量
$env:QT_QPA_PLATFORM_PLUGIN_PATH = ".venv\Lib\site-packages\PyQt5\Qt5\plugins"
# 运行主程序
python main.py
```

#### 验证安装
```bash
python -c "from PyQt5.QtWidgets import QApplication; from core import BilibiliUploaderApp; print('✅ 安装成功！')"
```

## 📁 项目结构

```
bilibili-uploader/
├── 📁 核心程序文件
│   ├── main.py                    # 主程序入口
│   ├── gui.py                     # 主GUI界面 (113KB)
│   └── core/                      # 核心功能模块
│       ├── app.py                 # 主应用类
│       ├── config.py              # 配置管理
│       ├── logger.py              # 日志系统
│       ├── license_system.py     # 许可证系统
│       ├── fingerprint_validator.py # 指纹验证
│       ├── bilibili_video_uploader.py # 视频上传
│       ├── bilibili_product_manager.py # 产品管理
│       ├── browser_detector.py    # 浏览器检测
│       └── browser_status_monitor.py # 浏览器状态监控
├── 📁 许可证相关
│   ├── license_standalone.py     # 独立许可证生成器（EXE构建用）
│   ├── license_gui.py            # 许可证GUI（源码版）
│   └── license_generator.py      # 许可证生成器（废弃）
├── 📁 EXE构建
│   ├── simple_exe_builder.py     # EXE构建脚本
│   ├── debug_build.py           # 调试构建脚本
│   └── B站视频带货助手_完整EXE版/ # 最终EXE分发包
├── 📁 浏览器环境
│   └── ms-playwright/            # 内置Chromium浏览器
├── 📁 配置和数据
│   ├── config.json               # 应用配置
│   ├── accounts.json             # 账号数据（明文JSON）
│   ├── uploaded_videos.json     # 上传记录
│   ├── requirements.txt          # Python依赖
# 已移除加密功能，无需密钥文件
├── 📁 工作目录
│   ├── videos/                   # 视频文件目录
│   └── logs/                     # 日志文件目录
└── 📁 其他
    ├── start.bat                 # 启动脚本
    ├── README.md                 # 说明文档
    └── .gitignore               # Git忽略文件
```

## 🔧 详细使用方法

### 1. 账号管理
1. **添加账号**：
   - 在"账号管理"页面点击"添加账号"
   - 输入账号用户名（用于标识）
   - 系统自动生成浏览器指纹

2. **登录账号**：
   - 点击"登录账号"，系统打开专属浏览器
   - 手动完成B站登录（支持扫码、密码等方式）
   - 登录成功后程序自动保存状态

3. **指纹优化**：
   - 系统自动验证指纹安全性
   - 显示安全评分（0-100分）
   - 自动优化高风险指纹配置

### 2. 视频上传配置
1. **视频准备**：
   - 将视频文件放入 `videos/` 目录
   - 支持格式：mp4, avi, mkv, mov, wmv, flv, webm
   - 建议命名：`商品ID----商品名称.mp4`

2. **上传设置**：
   - 配置标题模板：支持 `{filename}` 等变量
   - 设置统一简介和标签
   - 选择视频分类和封面

3. **批量上传**：
   - 选择要使用的账号
   - 设置并发数（建议1-3个）
   - 点击"开始上传"

### 3. 许可证管理

#### 使用许可证生成器（EXE版本）
1. **启动工具**：双击 `B站许可证生成器.exe` 或运行 `启动许可证生成器.bat`
2. **生成许可证**：
   - 设置有效天数
   - 输入用户信息（可选）
   - 获取目标设备的硬件指纹
   - 点击"生成许可证"
3. **验证许可证**：
   - 在验证页面粘贴许可证内容
   - 点击"验证许可证"查看状态

#### 使用源码版许可证工具
```bash
# 启动许可证GUI
python license_gui.py

# 或使用启动脚本
.\start_license_gui.bat
```

## ⚙️ 配置文件说明

### config.json - 主配置文件
```json
{
  "video_directory": "videos",           // 视频目录
  "upload_settings": {
    "title_template": "{filename}",      // 标题模板
    "description": "精彩视频内容...",    // 视频简介
    "tags": ["带货", "推荐", "好物"],    // 默认标签
    "category": "生活"                   // 视频分类
  },
  "browser_settings": {
    "headless": false,                   // 是否无头模式
    "window_size": "1920,1080"          // 浏览器窗口大小
  }
}
```

### accounts.json - 账号数据（明文存储）
- 自动生成和管理
- 包含Cookie、指纹、状态等信息
- 以可读的JSON格式存储，便于调试和管理

## 🚨 常见问题解决

### 环境和安装问题

#### Q1: "无法解析导入PyQt5"错误
```bash
# 确认虚拟环境已激活
.\.venv\Scripts\Activate.ps1
# 检查Python路径
python -c "import sys; print(sys.executable)"
# 应该显示: your-project-path\.venv\Scripts\python.exe

# 重新安装PyQt5
pip uninstall PyQt5
pip install PyQt5==5.15.10
```

#### Q2: VS Code中显示导入错误
1. 按 `Ctrl+Shift+P` → "Python: Select Interpreter"
2. 选择项目中的 `./.venv/Scripts/python.exe`
3. 重启VS Code

#### Q3: Qt平台插件错误
```bash
# 设置Qt环境变量
$env:QT_QPA_PLATFORM_PLUGIN_PATH = ".venv\Lib\site-packages\PyQt5\Qt5\plugins"

# 或者重新安装PyQt5
pip install --force-reinstall PyQt5
```

### 功能使用问题

#### Q4: 程序启动很慢
- **EXE版本**：首次启动需要2-3分钟初始化内置浏览器，这是正常现象
- **源码版本**：检查网络连接，webdriver-manager需要下载ChromeDriver

#### Q5: 账号登录失败
1. 检查网络连接
2. 清除浏览器缓存和Cookie
3. 尝试手动访问B站确认网络正常
4. 查看logs目录中的详细错误日志

#### Q6: 上传失败
1. 确认视频文件格式支持
2. 检查视频文件名是否包含特殊字符
3. 确认账号登录状态正常
4. 查看上传日志了解具体错误

#### Q7: 浏览器指纹关联
1. 重新生成账号指纹
2. 检查指纹安全评分
3. 使用指纹优化功能
4. 避免在同一设备短时间内操作多个账号

### 性能优化

#### Q8: 内存占用过高
- **EXE版本**：内置浏览器需要较多内存，建议4GB+
- **源码版本**：
  ```bash
  # 启用headless模式（配置文件中设置）
  "browser_settings": {"headless": true}
  
  # 减少并发上传数量
  # 定期重启浏览器实例
  ```

#### Q9: 提高上传成功率
1. 合理设置上传间隔（建议3-5分钟）
2. 避免高峰时段批量上传
3. 使用稳定的网络环境
4. 定期更新浏览器指纹

## 🔒 安全建议

### 账号安全
1. **使用独立账号**：不要使用主要B站账号
2. **定期检查状态**：监控账号是否被限制
3. **合理分配任务**：避免单账号过度使用
4. **备份重要数据**：定期备份配置和账号信息

### 指纹安全
1. **定期更新指纹**：避免长期使用同一指纹
2. **监控安全评分**：保持80分以上的安全评分
3. **避免批量操作**：不同账号错开操作时间
4. **使用真实信息**：指纹信息尽量接近真实环境

## 📈 系统要求

### 最低要求
- **操作系统**：Windows 10/11 (64位)
- **内存**：4GB RAM
- **存储**：2GB可用空间
- **网络**：稳定的互联网连接

### 推荐配置
- **操作系统**：Windows 11 (64位)
- **内存**：8GB+ RAM
- **存储**：5GB+ SSD
- **网络**：光纤或高速宽带
- **显示器**：1920x1080或更高分辨率

## 🆚 版本对比

| 特性 | EXE版本 | 源码版本 |
|------|---------|----------|
| 安装难度 | ⭐ 极简 | ⭐⭐⭐ 中等 |
| 技术门槛 | ⭐ 极低 | ⭐⭐⭐⭐ 较高 |
| 启动速度 | ⭐⭐ 较慢 | ⭐⭐⭐⭐ 快 |
| 文件大小 | ⭐⭐ 241MB | ⭐⭐⭐⭐ <50MB |
| 自定义性 | ⭐⭐ 有限 | ⭐⭐⭐⭐⭐ 极高 |
| 更新便利 | ⭐⭐⭐ 一般 | ⭐⭐⭐⭐⭐ 极好 |
| 兼容性 | ⭐⭐⭐⭐⭐ 完美 | ⭐⭐⭐ 依赖环境 |

## 📞 技术支持

### 获取帮助
1. **查看日志**：检查 `logs/` 目录中的详细日志
2. **检查配置**：确认配置文件格式正确
3. **重启程序**：尝试完全退出后重新启动
4. **清理缓存**：删除临时文件和浏览器缓存

### 报告问题
请提供以下信息：
- 操作系统版本
- 程序版本（EXE版本/源码版本）
- 详细的错误信息
- 操作步骤
- 相关日志文件

## ⚖️ 免责声明

本工具仅供学习、研究和合法商业使用。用户在使用本工具时应：

1. **遵守法律法规**：严格遵守国家法律法规和平台服务条款
2. **合理使用**：避免过度或恶意使用影响平台正常运营
3. **内容合规**：确保上传内容符合平台规范和相关法律
4. **风险自担**：开发者不对使用本工具造成的任何后果负责

## 🔄 版本历史

### v2.0.0 (当前版本) - 2025.01
#### 🚀 重大更新
- **架构重构**：全面重构代码架构，提高稳定性和可维护性
- **EXE版本**：新增完整的EXE分发包，支持免安装使用
- **内置浏览器**：集成ms-playwright，无需额外配置浏览器环境
- **许可证系统**：新增硬件许可证验证系统

#### 🛠️ 技术改进
- **线程优化**：解决QThread警告，优化多线程管理
- **内存管理**：优化资源使用，防止内存泄露
- **错误处理**：完善异常处理和错误恢复机制
- **日志系统**：标准化日志输出，支持文件和GUI双重日志

#### 🎨 界面优化
- **现代化UI**：重新设计界面，提升用户体验
- **响应式布局**：优化不同分辨率下的显示效果
- **状态反馈**：改进进度显示和状态提示

### v1.0.0 - 2024
- 基础功能实现
- 多账号管理
- 浏览器指纹伪装
- 批量视频上传

## 📄 许可证

MIT License - 详见LICENSE文件

---

**🎯 专为B站带货场景优化，助力内容创作者高效管理视频上传！** 